backend:
  name: github
  repo: rahulsetrakian/rahulsetrakian.github.io
  # Change this to "main" when merging to production
  branch: feature/sveltia

local_backend: true

media_folder: "public/images/uploads"
public_folder: "/images/uploads"

site_url: "https://rahulsetrakian.in"

collections:

  - name: "posts"
    label: "Blog Posts"
    folder: "src/content/blog"
    create: true
    format: "yaml-frontmatter"
    extension: "mdx"
    identifier_field: "title"

    # each post lives in: src/content/blog/<slug>/index.mdx
    slug: "{{slug}}"          # logical slug used by the site
    path: "{{slug}}/index"    # physical file path inside the folder

    # store images next to the post file so `image: './image.png'` works
    media_folder: "."
    public_folder: "."

    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Description", name: "description", widget: "string" }
      - { label: "Date", name: "date", widget: "datetime", format: "YYYY-MM-DD" }
      - { label: "Tags", name: "tags", widget: "list", required: false }
      - { label: "Image", name: "image", widget: "image", required: false }
      - label: "Authors"
        name: "authors"
        widget: "relation"
        collection: "authors"
        search_fields: ["name"]
        value_field: "{{slug}}"
        display_fields: ["name"]
        multiple: true
      - { label: "Draft", name: "draft", widget: "boolean", default: true }
      - label: "Body"
        name: "body"
        widget: "markdown"
        required: true
        hint: "Main content of the blog post"

  - name: "subposts"
    label: "Subposts"
    folder: "src/content/blog"
    create: true
    format: "yaml-frontmatter"
    extension: "mdx"
    identifier_field: "title"
    # Create subpost as: src/content/blog/<parentSlug>/<slug>.mdx
    # Fixed for Sveltia: used path instead of slug for slashes
    slug: "{{slug}}"
    path: "{{fields.parentSlug}}/{{slug}}"
    
    media_folder: "."
    public_folder: "."

    fields:
      - { label: "Parent Post Slug", name: "parentSlug", widget: "string", hint: "The folder name of the parent post (e.g., 'mobile-nav-and-subposts')", required: true }
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Description", name: "description", widget: "string" }
      - { label: "Date", name: "date", widget: "datetime", format: "YYYY-MM-DD" }
      - { label: "Order", name: "order", widget: "number", required: false, hint: "Order for sorting subposts (lower numbers appear first)" }
      - { label: "Tags", name: "tags", widget: "list", required: false }
      - { label: "Image", name: "image", widget: "image", required: false }
      - label: "Authors"
        name: "authors"
        widget: "relation"
        collection: "authors"
        search_fields: ["name"]
        value_field: "{{slug}}"
        display_fields: ["name"]
        multiple: true
      - { label: "Draft", name: "draft", widget: "boolean", default: true }
      - label: "Body"
        name: "body"
        widget: "markdown"
        required: false
        hint: "Main content of the subpost"

  - name: "authors"
    label: "Authors"
    folder: "src/content/authors"
    create: true
    format: "frontmatter"
    extension: "md"
    identifier_field: "name"
    slug: "{{slug}}"
    path: "{{slug}}"
    # media_folder: "./images"
    # public_folder: "./images"

    fields:
      - { label: "Name", name: "name", widget: "string" }
      - { label: "Pronouns", name: "pronouns", widget: "string", required: false }
      - { label: "Avatar", name: "avatar", widget: "image", required: true }
      - { label: "Bio", name: "bio", widget: "text", required: false }
      - { label: "Website", name: "website", widget: "string", required: false }
      - { label: "Twitter", name: "twitter", widget: "string", required: false }
      - { label: "GitHub", name: "github", widget: "string", required: false }
      - { label: "Email", name: "mail", widget: "string", required: false }


  - name: "projects"
    label: "Projects"
    folder: "src/content/projects"
    create: true
    format: "frontmatter"
    extension: "md"
    identifier_field: "name"
    slug: "{{slug}}"
    path: "{{slug}}"
    media_folder: "."
    public_folder: "." 
    fields:
      - { label: "Name", name: "name", widget: "string" }
      - { label: "Description", name: "description", widget: "text" }
      - { label: "Tags", name: "tags", widget: "list" }
      - { label: "Image", name: "image", widget: "image" }
      - { label: "Link", name: "link", widget: "string", required: false }
      - { label: "Start Date", name: "startDate", widget: "datetime", required: false }
      - { label: "End Date", name: "endDate", widget: "datetime", required: false }